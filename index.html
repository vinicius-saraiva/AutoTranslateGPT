<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INDY - AI Translator</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&family=Ruda:wght@400;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Cg transform='matrix(-1,0,0,1,32,0) scale(0.015625)'%3E%3Cpath fill='%23CC3333' transform='translate(1153)' d='m0 0h142l-7 12-7 10-34 51-7 11 56-8 49-5 42-3 54-2h84l-2 5-13 22-17 28-11 19-12 20-17 28-15 25h81l74 6 52 6 112 14 4 2-6 8-8 11-14 19-16 21-11 14-9 11-11 13-7 8-16 17-13 14-8 7-15 14-11 10-28 22-9 7 9 2 38 6 45 10 28 8 36 12 44 17 86 37 58 25 1 4-10 9-148 148 16 8 26 12 44 24 17 11 21 14 19 14 13 10 14 11 12 9 1 4-185 185-6 7-5 4v2l10 8 14 12 11 9 16 15 28 28 9 11 10 11 9 11 12 15 12 17 13 18 10 15 9 13v3l-32 14-147 63-33 14-5 1 3 5 9 10 11 12 7 8 12 14 13 17 10 12 14 19 14 20 9 13 15 24 12 20 10 17 10 18 9 15-1 3h-28l-56-1-30-2-39-4-41-7-41-9-7-1 14 49 45 157 4 13v4l-2 1h-235l10 35 6 26 5 29 4 38 1 19v65l-6-1-47-16-34-13-39-18-28-15-17-10-22-14-6-4v143l-1 2h-41l-38-3-34-7-20-6-27-10-28-14-16-10-23-16-11-10-8-7-10-9-9-9-9-11-11-13-14-21-8-13v-2h-2l-2 9-10 35-8 20-14 30-6 11-12 19-10 15-6 8-11 13-9 10-9 11-27 27h-3l-7-8-10-10v-2h-2l-7-8-9-9-7-8-8-9-11-14-14-19-16-25-12-22-8-15-14-32-11-31-9-34-8-44-6-43-4-38-2-35v-8l-93 1-191 82-20 8-19 6-19 3-19 1-26-3-20-6-17-8-12-8-11-9-10-10-11-15-7-12-6-15-4-14-2-12v-25l3-18 8-26 8-25 1-195h-99l-1-1v-43l2-26 5-29 7-25 8-22 8-18 12-23 7-11 13-18 8-10 18-21h2v-2l8-7 10-9 6-5-2-4-55-55 1-6h2l2-4 14-19 10-13 14-19 10-13 14-19 10-13 14-19 2-3-1-5-6-10-6-14-3-13-1-15 2-17 4-15 8-16 8-11 11-14 9-11 11-14 10-12 10-13 9-11 8-10 11-14 13-16 5-7h2l2-4 12-12 17-11 17-7 14-4 7-7 5-7h2l2-4 12-14 9-11 8-9 9-11 2-3h2l2-4 13-15 9-11 12-14 6-8h2l2-4 13-15 9-11 12-14 6-8h2l2-4 12-14 22-26 6-8h2l2-4 12-14 9-11 8-9 9-11 2-3h2l2-4 13-15 8-10 8-9 9-11 2-3h2l2-4 12-14 9-11 8-9 9-11 2-3h2l2-4 13-14 7-8 12-13 18-18h2v-2l8-7 11-10 11-9 18-14 12-9 14-10 24-15 21-13 22-11 19-10 36-15 25-9 35-11 30-7 29-6 48-7z'/%3E%3Cpath fill='%23CC3333' transform='translate(365,1033)' d='m0 0h67l1 2v64l-2 2h-65l-1-1z'/%3E%3C/g%3E%3C/svg%3E">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="script.js" type="module"></script>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <svg class="logo-img" width="32" height="32" viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" transform="matrix(-1,0,0,1,0,0)" style="cursor: pointer;">
                    <path transform="translate(1153)" d="m0 0h142l-7 12-7 10-34 51-7 11 56-8 49-5 42-3 54-2h84l-2 5-13 22-17 28-11 19-12 20-17 28-15 25h81l74 6 52 6 112 14 4 2-6 8-8 11-14 19-16 21-11 14-9 11-11 13-7 8-16 17-13 14-8 7-15 14-11 10-28 22-9 7 9 2 38 6 45 10 28 8 36 12 44 17 86 37 58 25 1 4-10 9-148 148 16 8 26 12 44 24 17 11 21 14 19 14 13 10 14 11 12 9 1 4-185 185-6 7-5 4v2l10 8 14 12 11 9 16 15 28 28 9 11 10 11 9 11 12 15 12 17 13 18 10 15 9 13v3l-32 14-147 63-33 14-5 1 3 5 9 10 11 12 7 8 12 14 13 17 10 12 14 19 14 20 9 13 15 24 12 20 10 17 10 18 9 15-1 3h-28l-56-1-30-2-39-4-41-7-41-9-7-1 14 49 45 157 4 13v4l-2 1h-235l10 35 6 26 5 29 4 38 1 19v65l-6-1-47-16-34-13-39-18-28-15-17-10-22-14-6-4v143l-1 2h-41l-38-3-34-7-20-6-27-10-28-14-16-10-23-16-11-10-8-7-10-9-9-9-9-11-11-13-14-21-8-13v-2h-2l-2 9-10 35-8 20-14 30-6 11-12 19-10 15-6 8-11 13-9 10-9 11-27 27h-3l-7-8-10-10v-2h-2l-7-8-9-9-7-8-8-9-11-14-14-19-16-25-12-22-8-15-14-32-11-31-9-34-8-44-6-43-4-38-2-35v-8l-93 1-191 82-20 8-19 6-19 3-19 1-26-3-20-6-17-8-12-8-11-9-10-10-11-15-7-12-6-15-4-14-2-12v-25l3-18 8-26 8-25 1-195h-99l-1-1v-43l2-26 5-29 7-25 8-22 8-18 12-23 7-11 13-18 8-10 18-21h2v-2l8-7 10-9 6-5-2-4-55-55 1-6h2l2-4 14-19 10-13 14-19 10-13 14-19 10-13 14-19 2-3-1-5-6-10-6-14-3-13-1-15 2-17 4-15 8-16 8-11 11-14 9-11 11-14 10-12 10-13 9-11 8-10 11-14 13-16 5-7h2l2-4 12-12 17-11 17-7 14-4 7-7 5-7h2l2-4 12-14 9-11 8-9 9-11 2-3h2l2-4 13-15 9-11 12-14 6-8h2l2-4 13-15 9-11 12-14 6-8h2l2-4 12-14 22-26 6-8h2l2-4 12-14 9-11 8-9 9-11 2-3h2l2-4 13-15 8-10 8-9 9-11 2-3h2l2-4 12-14 9-11 8-9 9-11 2-3h2l2-4 13-14 7-8 12-13 18-18h2v-2l8-7 11-10 11-9 18-14 12-9 14-10 24-15 21-13 22-11 19-10 36-15 25-9 35-11 30-7 29-6 48-7z"/>
                    <path transform="translate(365,1033)" d="m0 0h67l1 2v64l-2 2h-65l-1-1z"/>
                    <path transform="translate(888,1828)" d="m0 0"/>
                    <path transform="translate(760,1811)" d="m0 0"/>
                    <path transform="translate(780,1203)" d="m0 0"/>
                </svg>
                <span class="logo-text" style="cursor: pointer;">INDY.tradutor</span>
            </div>
            <div class="header-controls">
                <div class="api-input-group">
                    <select id="projectSelect" class="project-select">
                        <option value="">Select a project...</option>
                    </select>
                    <button id="addProjectBtn" class="icon-button" title="Add Project">
                        <span class="material-icons">add</span>
                    </button>
                </div>
                <button id="configureBtn" class="icon-button" title="Configuration">
                    <span class="material-icons">settings</span>
                </button>
            </div>
        </div>
    </div>

    <div id="status" class="status-message"></div>

    <div class="setup-container">
        <div class="setup-grid">
            <div class="setup-column">
                <div>
                    <h4>Source Language:</h4>
                    <div class="language-grid" id="sourceLangGrid">
                        <!-- Germanic languages -->
                        <button type="button" class="lang-button" data-lang="en-GB" data-selected="true" title="English">
                            <img src="https://flagcdn.com/w20/gb.png" alt="English">
                        </button>
                        <button type="button" class="lang-button" data-lang="de-DE" title="German">
                            <img src="https://flagcdn.com/w20/de.png" alt="German">
                        </button>
                        <button type="button" class="lang-button" data-lang="nl-NL" title="Dutch">
                            <img src="https://flagcdn.com/w20/nl.png" alt="Dutch">
                        </button>

                        <!-- Romance languages -->
                        <button type="button" class="lang-button" data-lang="fr-FR" title="French">
                            <img src="https://flagcdn.com/w20/fr.png" alt="French">
                        </button>
                        <button type="button" class="lang-button" data-lang="es-ES" title="Spanish">
                            <img src="https://flagcdn.com/w20/es.png" alt="Spanish">
                        </button>
                        <button type="button" class="lang-button" data-lang="it-IT" title="Italian">
                            <img src="https://flagcdn.com/w20/it.png" alt="Italian">
                        </button>
                        <button type="button" class="lang-button" data-lang="ro-RO" title="Romanian">
                            <img src="https://flagcdn.com/w20/ro.png" alt="Romanian">
                        </button>

                        <!-- Slavic languages -->
                        <button type="button" class="lang-button" data-lang="cs-CZ" title="Czech">
                            <img src="https://flagcdn.com/w20/cz.png" alt="Czech">
                        </button>
                        <button type="button" class="lang-button" data-lang="bg-BG" title="Bulgarian">
                            <img src="https://flagcdn.com/w20/bg.png" alt="Bulgarian">
                        </button>
                        <button type="button" class="lang-button" data-lang="pl-PL" title="Polish">
                            <img src="https://flagcdn.com/w20/pl.png" alt="Polish">
                        </button>

                        <!-- Other Indo-European -->
                        <button type="button" class="lang-button" data-lang="el-GR" title="Greek">
                            <img src="https://flagcdn.com/w20/gr.png" alt="Greek">
                        </button>

                        <!-- Uralic languages -->
                        <button type="button" class="lang-button" data-lang="hu-HU" title="Hungarian">
                            <img src="https://flagcdn.com/w20/hu.png" alt="Hungarian">
                        </button>

                        <!-- East Asian languages -->
                        <button type="button" class="lang-button" data-lang="zh-CN" title="Chinese">
                            <img src="https://flagcdn.com/w20/cn.png" alt="Chinese">
                        </button>
                        <button type="button" class="lang-button" data-lang="pt-PT" title="Portuguese">
                            <img src="https://flagcdn.com/w20/pt.png" alt="Portuguese">
                        </button>
                    </div>
                </div>
                <div class="ignore-blank-checkbox">
                    <input type="checkbox" id="ignoreBlankSource" checked>
                    <label for="ignoreBlankSource">Ignore blank source entries</label>
                </div>
                <div class="fun-facts-container">
                    <h3>Fun Translation Facts</h3>
                    <div id="funFact" class="fun-fact"></div>
                </div>
            </div>
            <div class="setup-column">
                <div>
                    <h4>Target Language:</h4>
                    <div class="language-grid" id="targetLangGrid">
                        <!-- Germanic languages -->
                        <button type="button" class="lang-button" data-lang="en-GB" title="English">
                            <img src="https://flagcdn.com/w20/gb.png" alt="English">
                        </button>
                        <button type="button" class="lang-button" data-lang="de-DE" title="German">
                            <img src="https://flagcdn.com/w20/de.png" alt="German">
                        </button>
                        <button type="button" class="lang-button" data-lang="nl-NL" title="Dutch">
                            <img src="https://flagcdn.com/w20/nl.png" alt="Dutch">
                        </button>

                        <!-- Romance languages -->
                        <button type="button" class="lang-button" data-lang="fr-FR" title="French">
                            <img src="https://flagcdn.com/w20/fr.png" alt="French">
                        </button>
                        <button type="button" class="lang-button" data-lang="es-ES" title="Spanish">
                            <img src="https://flagcdn.com/w20/es.png" alt="Spanish">
                        </button>
                        <button type="button" class="lang-button" data-lang="it-IT" title="Italian">
                            <img src="https://flagcdn.com/w20/it.png" alt="Italian">
                        </button>
                        <button type="button" class="lang-button" data-lang="ro-RO" title="Romanian">
                            <img src="https://flagcdn.com/w20/ro.png" alt="Romanian">
                        </button>

                        <!-- Slavic languages -->
                        <button type="button" class="lang-button" data-lang="cs-CZ" title="Czech">
                            <img src="https://flagcdn.com/w20/cz.png" alt="Czech">
                        </button>
                        <button type="button" class="lang-button" data-lang="bg-BG" title="Bulgarian">
                            <img src="https://flagcdn.com/w20/bg.png" alt="Bulgarian">
                        </button>
                        <button type="button" class="lang-button" data-lang="pl-PL" title="Polish">
                            <img src="https://flagcdn.com/w20/pl.png" alt="Polish">
                        </button>

                        <!-- Other Indo-European -->
                        <button type="button" class="lang-button" data-lang="el-GR" title="Greek">
                            <img src="https://flagcdn.com/w20/gr.png" alt="Greek">
                        </button>

                        <!-- Uralic languages -->
                        <button type="button" class="lang-button" data-lang="hu-HU" title="Hungarian">
                            <img src="https://flagcdn.com/w20/hu.png" alt="Hungarian">
                        </button>

                        <!-- East Asian languages -->
                        <button type="button" class="lang-button" data-lang="zh-CN" title="Chinese">
                            <img src="https://flagcdn.com/w20/cn.png" alt="Chinese">
                        </button>
                        <button type="button" class="lang-button" data-lang="pt-PT" title="Portuguese">
                            <img src="https://flagcdn.com/w20/pt.png" alt="Portuguese">
                        </button>
                    </div>
                </div>
                <div class="checkbox-group">
                    <label>
                        <input type="checkbox" id="ignoreTranslated">
                        Ignore entries already translated in target language
                    </label>
                </div>
                <div class="checkbox-group">
                    <label>
                        <input type="checkbox" id="onlyEmpty">
                        Only translate empty entries
                    </label>
                </div>
                <div class="checkbox-group">
                    <label>
                        <input type="checkbox" id="translateAll">
                        Translate to all target languages at once
                    </label>
                </div>
                <div class="filter-group">
                    <input type="checkbox" id="filterCheckbox">
                    <label for="filterCheckbox">Ignore entries with tag "sameassource"</label>
                </div>
            </div>
        </div>
    </div>

    
    <div class="stats-container">
        <div class="stats-grid">
            <div class="stat-item">
                <label>Total Entries:</label>
                <span id="totalEntries">0</span>
            </div>
            <div class="stat-item">
                <label>Translated Entries:</label>
                <span id="translatedEntries">0</span>
            </div>
        </div>
        <div class="progress-container">
            <div class="progress">
                <div class="progress-fill" id="progressFill">
                    <span id="progressPercentage">0%</span>
                </div>
            </div>
        </div>
    </div>

    <div class="control-panel">
        <div class="batch-size-container">
            <input type="number" 
                   id="batchSize" 
                   class="input-with-tooltip" 
                   placeholder="Batch size" 
                   title="Batch size" 
                   min="1" 
                   value="10000">
        </div>
        <button id="startBtn">Start</button>
        <button id="nextBtn" disabled>Next Batch</button>
        <button class="icon-button" title="Save single target language translations" id="saveBtn">
            <span class="material-icons">save</span>
        </button>
        <button class="icon-button" title="Save all target language translations" id="downloadAllBtn">
            <span class="material-icons">cloud_download</span>
        </button>
    </div>

    <div class="table-container">
        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th colspan="4" class="language-navigation">
                            <div class="language-nav-container">
                                <button class="lang-nav-btn" id="prevLang">←</button>
                                <span id="currentTargetLang"></span>
                                <button class="lang-nav-btn" id="nextLang">→</button>
                            </div>
                        </th>
                    </tr>
                    <tr>
                        <th>Asset ID</th>
                        <th id="sourceHeader">English (Source)</th>
                        <th id="targetHeader1">Original Translation</th>
                        <th id="targetHeader2">New Translation</th>
                    </tr>
                </thead>
                <tbody id="translationTable">
                    <!-- Translations will be inserted here -->
                </tbody>
            </table>
        </div>
    </div>

    <div id="apiModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Configuration</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label for="openaiApiKey">OpenAI API Key</label>
                    <input type="password" id="openaiApiKey" placeholder="Enter your OpenAI API key" autocomplete="new-password">
                </div>
                <div class="prompt-section">
                    <div class="prompt-header">
                        <h3>Translation Prompt</h3>
                        <div class="prompt-controls">
                            <button id="togglePrompt" class="icon-button" title="Show/Hide Prompt">
                                <span class="material-icons">visibility</span>
                            </button>
                            <button id="copyPrompt" class="icon-button" title="Copy Prompt">
                                <span class="material-icons">content_copy</span>
                            </button>
                        </div>
                    </div>
                    <div id="promptDisplay" class="prompt-display" style="display: block;">
                        <pre id="promptContent"></pre>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="saveApiKeys" class="save-btn">Save Configuration</button>
            </div>
        </div>
    </div>

    <div id="projectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Project Configuration</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="projectForm">
                    <div class="input-group">
                        <label for="projectName">Project Name</label>
                        <input type="text" id="projectName" required>
                    </div>
                    <div class="input-group">
                        <label for="readOnlyKey">Read-only API Key</label>
                        <input type="password" id="readOnlyKey" required autocomplete="new-password">
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="save-btn">Save Project</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="api-input-group hidden">
        <form>
            <label for="locoApiKey">Loco Project API Key:</label>
            <input type="password" id="locoApiKey" placeholder="Enter your Localise API key" autocomplete="new-password">
            <button id="loadProjectBtn" class="icon-button" title="Load Project">
                <span class="material-icons">cloud_upload</span>
            </button>
        </form>
    </div>

</body>
</html> 